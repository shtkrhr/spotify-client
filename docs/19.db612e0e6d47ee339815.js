(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{Qf7L:function(n,t,l){"use strict";l.r(t);var e=l("CcnG"),u=function(){return function(){}}(),r=l("pMnS"),a=l("ZYCi"),i=l("XlPw"),o=l("S5bw"),s=l("9Z1F"),c=l("xMyE"),b=l("15JJ"),p=l("364O"),f=l("coI/"),h=l("CcKO"),d=l("t/Na"),m=function(){function n(n,t){var l=this;this.http=n,this.trackApi=t,this.baseUrl="https://api.spotify.com/v1/me",this.userTracksCache=new f.a(3600),Object(p.d)().subscribe(function(n){return l.userTracksCache.clear()})}return n.prototype.tracks=function(n,t){var l=this;void 0===n&&(n=0),void 0===t&&(t=50);var e=Object(p.b)();if(!e)return Object(i.a)("No access token.");var u=e+",limit="+t+",offset="+n;return this.userTracksCache.get(u).pipe(Object(s.a)(function(e){return l.http.get(l.baseUrl+"/tracks",{params:{offset:n,limit:t}}).pipe(Object(c.a)(function(n){n.items.map(function(n){return l.trackApi.cacheTrack(n.track)}),l.userTracksCache.set(u,n)}))}))},n.prototype.allTracks=function(){var n=this,t=new o.a(1);return this.tracks(0,50).pipe(Object(c.a)(function(l){var e={completed:!l.next,items:l.items,total:l.total};if(t.next(e),e.completed)t.complete();else for(var u=e,r=Math.floor(l.total/50),a=1;a<=r;a++)n.tracks(50*a,50).subscribe(function(n){var l=u.items.concat(n.items),e={items:l,total:u.total,completed:l.length===u.total};t.next(e),e.completed&&t.complete(),u=e})}),Object(b.a)(function(n){return t.asObservable()}))},n.ngInjectableDef=e.U({factory:function(){return new n(e.Y(d.c),e.Y(h.a))},token:n,providedIn:"root"}),n}(),g=function(){function n(n,t){this.route=n,this.libApi=t}return n.prototype.ngOnInit=function(){var n=this;this.route.data.subscribe(function(t){n.data=t.data})},n.prototype.testFetch=function(){var n=this.libApi.allTracks();console.log("start subsc 1"),n.subscribe(function(n){console.log("recieved 1"),console.log(n)}),console.log("start subsc 2"),n.subscribe(function(n){console.log("recieved 2"),console.log(n)})},n}(),v=e.pb({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block}.progress[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center}.progress[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:right;width:12em}"]],data:{}});function y(n){return e.Lb(0,[(n()(),e.rb(0,0,null,null,2,"div",[["class","content"]],null,null,null,null,null)),(n()(),e.rb(1,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),e.qb(2,212992,null,0,a.q,[a.b,e.Q,e.j,[8,null],e.h],null,null)],function(n,t){n(t,2,0)},null)}function x(n){return e.Lb(0,[(n()(),e.rb(0,0,null,null,1,"sp-track-favorite",[],null,null,null,y,v)),e.qb(1,114688,null,0,g,[a.a,m],null,null)],function(n,t){n(t,1,0)},null)}var k=e.nb("sp-track-favorite",g,x,{},{},[]),C=l("8D0v"),O=l("y4Xi"),A=l("aHjC"),q=l("Ip0R"),j=l("3yVA"),L=l("ilYa"),w=l("2J0r"),z=function(){function n(n){this.route=n}return n.prototype.ngOnInit=function(){var n=this;this.route.data.subscribe(function(t){return n.data=t.data})},n}(),B=e.pb({encapsulation:0,styles:[[""]],data:{}});function I(n){return e.Lb(0,[(n()(),e.rb(0,0,null,null,5,"sp-thumbnail",[],null,null,null,C.b,C.a)),e.qb(1,49152,null,0,O.a,[],null,null),(n()(),e.rb(2,0,null,0,3,"a",[["sp-artist-thumbnail",""]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(n,t,l){var u=!0;return"click"===t&&(u=!1!==e.Bb(n,3).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&u),u},A.b,A.a)),e.qb(3,671744,null,0,a.o,[a.m,a.a,q.i],{routerLink:[0,"routerLink"]},null),e.Cb(4,2),e.qb(5,114688,null,0,j.a,[],{artist:[0,"artist"]},null)],function(n,t){var l=n(t,4,0,"/artist",t.context.$implicit.artist.id);n(t,3,0,l),n(t,5,0,t.context.$implicit.artist)},function(n,t){n(t,2,0,e.Bb(t,3).target,e.Bb(t,3).href)})}function $(n){return e.Lb(0,[(n()(),e.rb(0,0,null,null,3,"sp-thumbnail-group",[["gutter","narrow"]],[[1,"gutter",0],[1,"column",0]],[["window","resize"]],function(n,t,l){var u=!0;return"window:resize"===t&&(u=!1!==e.Bb(n,1).onWindowResize()&&u),u},L.b,L.a)),e.qb(1,13352960,null,0,w.a,[e.k,e.h],{gutter:[0,"gutter"],maxColumnWidth:[1,"maxColumnWidth"]},null),(n()(),e.ib(16777216,null,0,1,null,I)),e.qb(3,278528,null,0,q.k,[e.Q,e.N,e.t],{ngForOf:[0,"ngForOf"]},null)],function(n,t){n(t,1,0,"narrow",180),n(t,3,0,t.context.ngIf)},function(n,t){n(t,0,0,e.Bb(t,1).gutter,e.Bb(t,1).columnCount)})}function P(n){return e.Lb(0,[(n()(),e.ib(16777216,null,null,2,null,$)),e.qb(1,16384,null,0,q.l,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),e.Db(131072,q.b,[e.h])],function(n,t){var l=t.component;n(t,1,0,e.Kb(t,1,0,e.Bb(t,2).transform(l.data&&l.data.artistGroups$)))},null)}function T(n){return e.Lb(0,[(n()(),e.rb(0,0,null,null,1,"sp-favorite-artist",[],null,null,null,P,B)),e.qb(1,114688,null,0,z,[a.a],null,null)],function(n,t){n(t,1,0)},null)}var D=e.nb("sp-favorite-artist",z,T,{},{},[]),G=l("RQFq"),K=l("NBzC"),E=l("67Y/"),S=function(){function n(n){this.route=n}return n.prototype.ngOnInit=function(){var n=this;this.route.parent.data.subscribe(function(t){n.data=t.data,n.groups$=n.groupByAlbum(n.data)})},n.prototype.groupByAlbum=function(n){return n.tracksCollection$.pipe(Object(E.a)(function(n){var t={};return n.items.forEach(function(n){var l=n.track;t[l.album.id]||(t[l.album.id]={album:l.album,tracks:[]}),t[l.album.id].tracks.push(l)}),Object.values(t)}))},n}(),M=e.pb({encapsulation:0,styles:[[""]],data:{}});function N(n){return e.Lb(0,[(n()(),e.rb(0,0,null,null,5,"sp-thumbnail",[],null,null,null,C.b,C.a)),e.qb(1,49152,null,0,O.a,[],null,null),(n()(),e.rb(2,0,null,0,3,"a",[["sp-album-thumbnail",""]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(n,t,l){var u=!0;return"click"===t&&(u=!1!==e.Bb(n,3).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&u),u},G.b,G.a)),e.qb(3,671744,null,0,a.o,[a.m,a.a,q.i],{routerLink:[0,"routerLink"]},null),e.Cb(4,2),e.qb(5,114688,null,0,K.a,[],{album:[0,"album"]},null)],function(n,t){var l=n(t,4,0,"/album",t.context.$implicit.album.id);n(t,3,0,l),n(t,5,0,t.context.$implicit.album)},function(n,t){n(t,2,0,e.Bb(t,3).target,e.Bb(t,3).href)})}function _(n){return e.Lb(0,[(n()(),e.rb(0,0,null,null,3,"sp-thumbnail-group",[["gutter","narrow"]],[[1,"gutter",0],[1,"column",0]],[["window","resize"]],function(n,t,l){var u=!0;return"window:resize"===t&&(u=!1!==e.Bb(n,1).onWindowResize()&&u),u},L.b,L.a)),e.qb(1,13352960,null,0,w.a,[e.k,e.h],{gutter:[0,"gutter"],maxColumnWidth:[1,"maxColumnWidth"]},null),(n()(),e.ib(16777216,null,0,1,null,N)),e.qb(3,278528,null,0,q.k,[e.Q,e.N,e.t],{ngForOf:[0,"ngForOf"]},null)],function(n,t){n(t,1,0,"narrow",180),n(t,3,0,t.context.ngIf)},function(n,t){n(t,0,0,e.Bb(t,1).gutter,e.Bb(t,1).columnCount)})}function F(n){return e.Lb(0,[(n()(),e.ib(16777216,null,null,2,null,_)),e.qb(1,16384,null,0,q.l,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),e.Db(131072,q.b,[e.h])],function(n,t){var l=t.component;n(t,1,0,e.Kb(t,1,0,e.Bb(t,2).transform(l.groups$&&l.groups$)))},null)}function J(n){return e.Lb(0,[(n()(),e.rb(0,0,null,null,1,"sp-favorite-album",[],null,null,null,F,M)),e.qb(1,114688,null,0,S,[a.a],null,null)],function(n,t){n(t,1,0)},null)}var Q=e.nb("sp-favorite-album",S,J,{},{},[]),R=l("r8UC"),H=l("UPuZ"),W=l("CAEz"),U=l("jzRL"),V=function(){function n(n){this.route=n}return n.prototype.ngOnInit=function(){var n=this;this.route.parent.data.subscribe(function(t){return n.data=t.data})},n}(),Y=e.pb({encapsulation:0,styles:[[""]],data:{}});function Z(n){return e.Lb(0,[(n()(),e.rb(0,0,null,null,2,"sp-track-list",[],null,null,null,R.b,R.a)),e.qb(1,638976,null,0,H.a,[W.a,U.a],{tracks:[0,"tracks"],columns:[1,"columns"]},null),e.Cb(2,6)],function(n,t){var l=t.context.ngIf.items,e=n(t,2,0,"image","play","name","artist","album","duration");n(t,1,0,l,e)},null)}function X(n){return e.Lb(0,[(n()(),e.ib(16777216,null,null,2,null,Z)),e.qb(1,16384,null,0,q.l,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),e.Db(131072,q.b,[e.h])],function(n,t){var l=t.component;n(t,1,0,e.Kb(t,1,0,e.Bb(t,2).transform(l.data&&l.data.tracksCollection$)))},null)}function nn(n){return e.Lb(0,[(n()(),e.rb(0,0,null,null,1,"sp-favorite-track",[],null,null,null,X,Y)),e.qb(1,114688,null,0,V,[a.a],null,null)],function(n,t){n(t,1,0)},null)}var tn=e.nb("sp-favorite-track",V,nn,{},{},[]),ln=function(){function n(){}return n.prototype.ngOnInit=function(){},n}(),en=e.pb({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block}"]],data:{}});function un(n){return e.Lb(0,[(n()(),e.rb(0,0,null,null,3,"p",[],null,null,null,null,null)),(n()(),e.rb(1,0,null,null,2,"a",[["routerLink","./track"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(n,t,l){var u=!0;return"click"===t&&(u=!1!==e.Bb(n,2).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&u),u},null,null)),e.qb(2,671744,null,0,a.o,[a.m,a.a,q.i],{routerLink:[0,"routerLink"]},null),(n()(),e.Jb(-1,null,["Track"])),(n()(),e.rb(4,0,null,null,3,"p",[],null,null,null,null,null)),(n()(),e.rb(5,0,null,null,2,"a",[["routerLink","./genre"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(n,t,l){var u=!0;return"click"===t&&(u=!1!==e.Bb(n,6).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&u),u},null,null)),e.qb(6,671744,null,0,a.o,[a.m,a.a,q.i],{routerLink:[0,"routerLink"]},null),(n()(),e.Jb(-1,null,["Genre"])),(n()(),e.rb(8,0,null,null,2,"div",[["class","content"]],null,null,null,null,null)),(n()(),e.rb(9,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),e.qb(10,212992,null,0,a.q,[a.b,e.Q,e.j,[8,null],e.h],null,null)],function(n,t){n(t,2,0,"./track"),n(t,6,0,"./genre"),n(t,10,0)},function(n,t){n(t,1,0,e.Bb(t,2).target,e.Bb(t,2).href),n(t,5,0,e.Bb(t,6).target,e.Bb(t,6).href)})}function rn(n){return e.Lb(0,[(n()(),e.rb(0,0,null,null,1,"sp-favorite-analytics",[],null,null,null,un,en)),e.qb(1,114688,null,0,ln,[],null,null)],function(n,t){n(t,1,0)},null)}var an=e.nb("sp-favorite-analytics",ln,rn,{},{},[]),on=l("VphZ"),sn=l("K9Ia"),cn=l("gI3B"),bn=l("bWpG"),pn=l("ny24"),fn=l("4J3g"),hn=function(){function n(n){this.host=n,this.data=[],this.showOthers=!0,this.datumClickEvent=new e.n,this.formatedData=[],this.xScale=on.l(),this.xAxis=on.c(this.xScale),this.destroyEvent=new sn.a,this.inited=!1}return n.prototype.ngOnInit=function(){this.inited=!0,Object(fn.c)().pipe(Object(bn.a)(function(n){return Object(cn.a)(50)}),Object(pn.a)(this.destroyEvent)).subscribe(this.onResize.bind(this)),this.$svg=on.m(this.svgElement.nativeElement),this.$chartArea=on.m(this.chartArea.nativeElement),this.$dataGroup=on.m(this.dataGroup.nativeElement),this.$dataNamesGroup=on.m(this.dataNamesGroup.nativeElement),this.$xAxisGroup=on.m(this.xAxisGroup.nativeElement),this.$chartArea.style("transform","translate(150px, 30px)").attr("transform","translate(150, 30)"),this.updateLayout(),this.callAxis(),this.renderData(),this.setSvgHeight()},n.prototype.ngOnChanges=function(n){this.formatedData=this.formatData(this.data||[],this.showOthers,this.displayedCount),this.xScale.domain([0,on.k(this.formatedData,function(n){return n.value})]),this.inited&&(this.updateLayout(),this.callAxis(),this.renderData(),this.setSvgHeight())},n.prototype.ngOnDestroy=function(){this.destroyEvent.next(),this.destroyEvent.complete()},n.prototype.onResize=function(){this.inited&&(this.updateLayout(),this.callAxis(),this.renderData(),this.setSvgHeight())},n.prototype.updateLayout=function(){this.xScale.range([0,this.host.nativeElement.clientWidth-150-0-10])},n.prototype.callAxis=function(){this.$xAxisGroup.call(this.xAxis)},n.prototype.renderData=function(){var n=this;this.$dataGroup.selectAll("*").remove(),this.$dataGroup.selectAll("rect").data(this.formatedData).enter().append("rect").attr("x",this.xScale(0)).attr("y",function(n,t){return 34*t+8}).attr("width",function(t){return n.xScale(t.value)-n.xScale(0)}).attr("height",26).attr("class",function(n){return"bar bar-"+n.id}).style("fill",function(n){return"others"===n.id?"lightgrey":"black"}).on("click",function(t){return n.datumClickEvent.next(t)}),this.$dataNamesGroup.selectAll("*").remove();var t=this.$dataNamesGroup.selectAll("g").data(this.formatedData).enter().append("g").attr("transform",function(t,l){return"translate("+n.xScale(0)+", "+(34*l+8)+")"}).style("transform",function(t,l){return"translate("+n.xScale(0)+"px, "+(34*l+8)+"px)"}).attr("class",function(n){return"name-group name-group-"+n.id});t.append("line").attr("x1",0).attr("y1",13).attr("x2",-10).attr("y2",13).attr("stroke","black"),t.append("text").text(function(n){return n.name||n.id}).attr("class",function(n){return"name-text name-text-"+n.id}).attr("text-anchor","end").attr("dominant-baseline","central").attr("transform","translate(-14, 13)").style("transform","translate(-14px, 13px)")},n.prototype.setSvgHeight=function(){this.svgElement.nativeElement.style.height=34*this.formatedData.length+30+0+"px"},n.prototype.formatData=function(n,t,l){var e=n.slice().sort(function(n,t){return t.value-n.value}),u=parseInt(l+"",10);if(u<=0||isNaN(u))return e;var r=e.slice(0,u);if(!t)return r;var a=e.slice(u).reduce(function(n,t){return n.value+=t.value,n},{id:"others",value:0});return a.value>0?r.concat([a]):r},n}(),dn=e.pb({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block}svg[_ngcontent-%COMP%]{width:100%;height:200px}svg[_ngcontent-%COMP%]     .bar{cursor:pointer}svg[_ngcontent-%COMP%]     .name-text{font-size:12px}"]],data:{}});function mn(n){return e.Lb(0,[e.Hb(402653184,1,{svgElement:0}),e.Hb(402653184,2,{chartArea:0}),e.Hb(402653184,3,{dataGroup:0}),e.Hb(402653184,4,{dataNamesGroup:0}),e.Hb(402653184,5,{xAxisGroup:0}),(n()(),e.rb(5,0,[[1,0],["svg",1]],null,4,":svg:svg",[],null,null,null,null,null)),(n()(),e.rb(6,0,[[2,0],["chartArea",1]],null,3,":svg:g",[["class","chart-area"]],null,null,null,null,null)),(n()(),e.rb(7,0,[[4,0],["dataNamesGroup",1]],null,0,":svg:g",[["class","data-names"]],null,null,null,null,null)),(n()(),e.rb(8,0,[[3,0],["dataGroup",1]],null,0,":svg:g",[["class","data"]],null,null,null,null,null)),(n()(),e.rb(9,0,[[5,0],["xAxisGroup",1]],null,0,":svg:g",[["class","x-axis"]],null,null,null,null,null))],null,null)}var gn=l("bujt"),vn=l("UodH"),yn=l("dWZg"),xn=l("lLAP"),kn=l("wFw1"),Cn=function(){function n(n,t){this.route=n,this.router=t,this.displayedCount=10}return n.prototype.ngOnInit=function(){var n=this;this.route.data.subscribe(function(t){return n.data=t.data})},n.prototype.onGenreClick=function(n){var t=n.id;this.displayedCount=10,this.router.navigate(["./"],{queryParams:{genre:t},relativeTo:this.route})},n.prototype.toggleDisplayedCount=function(){this.displayedCount=this.displayedCount?void 0:10},n}(),On=e.pb({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block}.toggle-button[_ngcontent-%COMP%]{display:flex;padding:10px 0}.toggle-button[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex:1 0 0%}"]],data:{}});function An(n){return e.Lb(0,[(n()(),e.rb(0,0,null,null,5,"sp-thumbnail",[],null,null,null,C.b,C.a)),e.qb(1,49152,null,0,O.a,[],null,null),(n()(),e.rb(2,0,null,0,3,"a",[["sp-artist-thumbnail",""]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(n,t,l){var u=!0;return"click"===t&&(u=!1!==e.Bb(n,3).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&u),u},A.b,A.a)),e.qb(3,671744,null,0,a.o,[a.m,a.a,q.i],{routerLink:[0,"routerLink"]},null),e.Cb(4,2),e.qb(5,114688,null,0,j.a,[],{artist:[0,"artist"]},null)],function(n,t){var l=n(t,4,0,"/artist",t.context.$implicit.id);n(t,3,0,l),n(t,5,0,t.context.$implicit)},function(n,t){n(t,2,0,e.Bb(t,3).target,e.Bb(t,3).href)})}function qn(n){return e.Lb(0,[(n()(),e.rb(0,0,null,null,12,"section",[],null,null,null,null,null)),(n()(),e.rb(1,0,null,null,7,"h2",[],null,null,null,null,null)),(n()(),e.rb(2,0,null,null,4,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(n,t,l){var u=!0;return"click"===t&&(u=!1!==e.Bb(n,3).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&u),u},null,null)),e.qb(3,671744,null,0,a.o,[a.m,a.a,q.i],{queryParams:[0,"queryParams"],routerLink:[1,"routerLink"]},null),e.Eb(4,{genres:0}),e.Cb(5,1),(n()(),e.Jb(6,null,["",""])),(n()(),e.rb(7,0,null,null,1,"small",[],null,null,null,null,null)),(n()(),e.Jb(8,null,["(",")"])),(n()(),e.rb(9,0,null,null,3,"sp-thumbnail-group",[["gutter","narrow"]],[[1,"gutter",0],[1,"column",0]],[["window","resize"]],function(n,t,l){var u=!0;return"window:resize"===t&&(u=!1!==e.Bb(n,10).onWindowResize()&&u),u},L.b,L.a)),e.qb(10,13352960,null,0,w.a,[e.k,e.h],{gutter:[0,"gutter"],maxColumnWidth:[1,"maxColumnWidth"]},null),(n()(),e.ib(16777216,null,0,1,null,An)),e.qb(12,278528,null,0,q.k,[e.Q,e.N,e.t],{ngForOf:[0,"ngForOf"]},null)],function(n,t){var l=n(t,4,0,t.parent.context.ngIf),e=n(t,5,0,"/search");n(t,3,0,l,e),n(t,10,0,"narrow",180),n(t,12,0,t.context.ngIf)},function(n,t){n(t,2,0,e.Bb(t,3).target,e.Bb(t,3).href);var l=t.parent.context.ngIf.toUpperCase();n(t,6,0,l),n(t,8,0,t.context.ngIf.length),n(t,9,0,e.Bb(t,10).gutter,e.Bb(t,10).columnCount)})}function jn(n){return e.Lb(0,[(n()(),e.rb(0,0,null,null,3,null,null,null,null,null,null,null)),(n()(),e.ib(16777216,null,null,2,null,qn)),e.qb(2,16384,null,0,q.l,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),e.Db(131072,q.b,[e.h]),(n()(),e.ib(0,null,null,0))],function(n,t){var l=t.component;n(t,2,0,e.Kb(t,2,0,e.Bb(t,3).transform(l.data.genredArtists$)))},null)}function Ln(n){return e.Lb(0,[(n()(),e.rb(0,0,null,null,10,null,null,null,null,null,null,null)),(n()(),e.rb(1,0,null,null,6,"div",[],null,null,null,null,null)),(n()(),e.rb(2,0,null,null,1,"sp-bar-chart",[],null,[[null,"datumClick"]],function(n,t,l){var e=!0;return"datumClick"===t&&(e=!1!==n.component.onGenreClick(l)&&e),e},mn,dn)),e.qb(3,770048,null,0,hn,[e.k],{data:[0,"data"],displayedCount:[1,"displayedCount"],showOthers:[2,"showOthers"]},{datumClickEvent:"datumClick"}),(n()(),e.rb(4,0,null,null,3,"div",[["class","toggle-button"]],null,null,null,null,null)),(n()(),e.rb(5,0,null,null,2,"a",[["mat-flat-button",""]],[[1,"tabindex",0],[1,"disabled",0],[1,"aria-disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(n,t,l){var u=!0,r=n.component;return"click"===t&&(u=!1!==e.Bb(n,6)._haltDisabledEvents(l)&&u),"click"===t&&(u=!1!==r.toggleDisplayedCount()&&u),u},gn.c,gn.a)),e.qb(6,180224,null,0,vn.a,[yn.a,xn.c,e.k,[2,kn.a]],null,null),(n()(),e.Jb(7,0,["",""])),(n()(),e.ib(16777216,null,null,2,null,jn)),e.qb(9,16384,null,0,q.l,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),e.Db(131072,q.b,[e.h]),(n()(),e.ib(0,null,null,0))],function(n,t){var l=t.component;n(t,3,0,t.context.ngIf,l.displayedCount,!1),n(t,9,0,e.Kb(t,9,0,e.Bb(t,10).transform(l.data.selectedGenre$)))},function(n,t){var l=t.component;n(t,5,0,e.Bb(t,6).disabled?-1:e.Bb(t,6).tabIndex||0,e.Bb(t,6).disabled||null,e.Bb(t,6).disabled.toString(),"NoopAnimations"===e.Bb(t,6)._animationMode),n(t,7,0,l.displayedCount?"Show all":"Hide")})}function wn(n){return e.Lb(0,[(n()(),e.ib(16777216,null,null,2,null,Ln)),e.qb(1,16384,null,0,q.l,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),e.Db(131072,q.b,[e.h])],function(n,t){var l=t.component;n(t,1,0,e.Kb(t,1,0,e.Bb(t,2).transform(l.data&&l.data.chartData$)))},null)}function zn(n){return e.Lb(0,[(n()(),e.rb(0,0,null,null,1,"sp-favorite-analytics-genre",[],null,null,null,wn,On)),e.qb(1,114688,null,0,Cn,[a.a,a.m],null,null)],function(n,t){n(t,1,0)},null)}var Bn=e.nb("sp-favorite-analytics-genre",Cn,zn,{},{},[]),In=l("K/Re"),$n=l("u3Lo"),Pn=l("PB9v"),Tn=l("PWL4"),Dn=l("R9JX"),Gn=l("26FU"),Kn=l("F/XL"),En=l("dzgT"),Sn=function(){function n(n,t){this.route=n,this.trackApi=t,this.xAxisType=Dn.a.Duration,this.yAxisType=Dn.a.Loudness,this.selectedTracks$=new Gn.a(void 0),this.selectedFeatureValues$=new Gn.a(void 0)}return n.prototype.ngOnInit=function(){var n=this;this.route.data.subscribe(function(t){return n.data=t.data})},n.prototype.onSelect=function(n){var t=this;if(0===n.length)return this.selectedTracks$.next(void 0),void this.selectedFeatureValues$.next(void 0);var l=Object(Dn.c)(this.xAxisType),e=Object(Dn.c)(this.yAxisType),u={x:{name:l.name,value:l.format?l.format(n[0][l.key]):l.unit?n[0][l.key]+" ["+l.unit+"]":n[0][l.key]},y:{name:e.name,value:e.format?e.format(n[0][e.key]):e.unit?n[0][e.key]+" ["+e.unit+"]":n[0][e.key]}};this.selectedFeatureValues$.next(u);var r=n.map(function(n){return t.trackApi.show(n.id).pipe(Object(s.a)(function(n){return Object(Kn.a)(!1)}))});Object(En.a)(r).subscribe(function(n){t.selectedTracks$.next(n.filter(function(n){return!!n}))})},n.prototype.onAxisChange=function(n){this.xAxisType=n.x,this.yAxisType=n.y,this.selectedTracks$.next(void 0),this.selectedFeatureValues$.next(void 0)},n}(),Mn=e.pb({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block}.mat-table[_ngcontent-%COMP%]{width:100%}.selected-feature-values[_ngcontent-%COMP%]{padding-left:70px}.selected-feature-values[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;width:8.5em}"]],data:{}});function Nn(n){return e.Lb(0,[(n()(),e.rb(0,0,null,null,2,"sp-features-chart",[],null,[[null,"dataSelect"]],function(n,t,l){var e=!0;return"dataSelect"===t&&(e=!1!==n.component.onSelect(l)&&e),e},In.b,In.a)),e.qb(1,770048,null,0,$n.a,[e.k],{featuresList:[0,"featuresList"],xAxisType:[1,"xAxisType"],yAxisType:[2,"yAxisType"]},{dataSelectEvent:"dataSelect"}),e.Db(131072,q.b,[e.h])],function(n,t){var l=t.component;n(t,1,0,e.Kb(t,1,0,e.Bb(t,2).transform(l.data.featuresList$)),l.xAxisType,l.yAxisType)},null)}function _n(n){return e.Lb(0,[(n()(),e.rb(0,0,null,null,10,"div",[["class","selected-feature-values"]],null,null,null,null,null)),(n()(),e.rb(1,0,null,null,4,"p",[],null,null,null,null,null)),(n()(),e.Jb(-1,null,[" X - "])),(n()(),e.rb(3,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),e.Jb(4,null,["",":"])),(n()(),e.Jb(5,null,[" "," "])),(n()(),e.rb(6,0,null,null,4,"p",[],null,null,null,null,null)),(n()(),e.Jb(-1,null,[" Y - "])),(n()(),e.rb(8,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),e.Jb(9,null,["",":"])),(n()(),e.Jb(10,null,[" "," "]))],null,function(n,t){n(t,4,0,t.context.ngIf.x.name),n(t,5,0,t.context.ngIf.x.value),n(t,9,0,t.context.ngIf.y.name),n(t,10,0,t.context.ngIf.y.value)})}function Fn(n){return e.Lb(0,[(n()(),e.rb(0,0,null,null,3,null,null,null,null,null,null,null)),(n()(),e.rb(1,0,null,null,2,"sp-track-list",[],null,null,null,R.b,R.a)),e.qb(2,638976,null,0,H.a,[W.a,U.a],{tracks:[0,"tracks"],columns:[1,"columns"]},null),e.Cb(3,5)],function(n,t){var l=t.context.ngIf,e=n(t,3,0,"image","play","name","artist","album");n(t,2,0,l,e)},null)}function Jn(n){return e.Lb(0,[(n()(),e.rb(0,0,null,null,1,"sp-features-chart-axis-select",[],null,[[null,"axisChange"]],function(n,t,l){var e=!0;return"axisChange"===t&&(e=!1!==n.component.onAxisChange(l)&&e),e},Pn.b,Pn.a)),e.qb(1,114688,null,0,Tn.a,[],{xAxisType:[0,"xAxisType"],yAxisType:[1,"yAxisType"]},{axisChangeEvent:"axisChange"}),(n()(),e.ib(16777216,null,null,1,null,Nn)),e.qb(3,16384,null,0,q.l,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),(n()(),e.ib(16777216,null,null,2,null,_n)),e.qb(5,16384,null,0,q.l,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),e.Db(131072,q.b,[e.h]),(n()(),e.ib(16777216,null,null,2,null,Fn)),e.qb(8,16384,null,0,q.l,[e.Q,e.N],{ngIf:[0,"ngIf"]},null),e.Db(131072,q.b,[e.h]),(n()(),e.rb(10,0,null,null,2,"div",[["class","content"]],null,null,null,null,null)),(n()(),e.rb(11,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),e.qb(12,212992,null,0,a.q,[a.b,e.Q,e.j,[8,null],e.h],null,null)],function(n,t){var l=t.component;n(t,1,0,l.xAxisType,l.yAxisType),n(t,3,0,l.data),n(t,5,0,e.Kb(t,5,0,e.Bb(t,6).transform(l.selectedFeatureValues$))),n(t,8,0,e.Kb(t,8,0,e.Bb(t,9).transform(l.selectedTracks$))),n(t,12,0)},null)}function Qn(n){return e.Lb(0,[(n()(),e.rb(0,0,null,null,1,"sp-favorite-analytics-track",[],null,null,null,Jn,Mn)),e.qb(1,114688,null,0,Sn,[a.a,h.a],null,null)],function(n,t){n(t,1,0)},null)}var Rn=e.nb("sp-favorite-analytics-track",Sn,Qn,{},{},[]),Hn=function(){function n(n,t){this.router=n,this.libApi=t}return n.prototype.resolve=function(n){var t=new o.a(1);return this.libApi.allTracks().subscribe(t.next.bind(t)),{tracksCollection$:t.asObservable()}},n}(),Wn=l("svcd"),Un=l("VnD/"),Vn=function(){function n(n,t){this.trackApi=n,this.router=t}return n.prototype.resolve=function(n){var t=this,l=n.parent.parent.data.data.tracksCollection$,e=new Wn.a,u=this.router.events.pipe(Object(Un.a)(function(n){return n instanceof a.e}));return l.pipe(Object(pn.a)(u)).subscribe(function(n){var l;n.completed&&(l=t.trackApi).features.apply(l,n.items.map(function(n){return n.track.id})).pipe(Object(pn.a)(u)).subscribe(function(n){e.next(n),e.complete()})}),{tracksCollection$:l,featuresList$:e.asObservable()}},n}(),Yn=l("mrSG"),Zn=l("MGBS"),Xn=l("zotm");function nt(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return function(t){var l;return"function"==typeof n[n.length-1]&&(l=n.pop()),t.lift(new tt(n,l))}}var tt=function(){function n(n,t){this.observables=n,this.project=t}return n.prototype.call=function(n,t){return t.subscribe(new lt(n,this.observables,this.project))},n}(),lt=function(n){function t(t,l,e){var u=n.call(this,t)||this;u.observables=l,u.project=e,u.toRespond=[];var r=l.length;u.values=new Array(r);for(var a=0;a<r;a++)u.toRespond.push(a);for(a=0;a<r;a++){var i=l[a];u.add(Object(Xn.a)(u,i,i,a))}return u}return Yn.__extends(t,n),t.prototype.notifyNext=function(n,t,l,e,u){this.values[l]=t;var r=this.toRespond;if(r.length>0){var a=r.indexOf(l);-1!==a&&r.splice(a,1)}},t.prototype.notifyComplete=function(){},t.prototype._next=function(n){if(0===this.toRespond.length){var t=[n].concat(this.values);this.project?this._tryProject(t):this.destination.next(t)}},t.prototype._tryProject=function(n){var t;try{t=this.project.apply(this,n)}catch(l){return void this.destination.error(l)}this.destination.next(t)},t}(Zn.a),et=l("52yP"),ut=l("LvDl"),rt=function(){function n(n,t){this.artistApi=n,this.router=t}return n.prototype.resolve=function(n){var t=this,l=n.parent.parent.data.data.tracksCollection$,e=new Wn.a,u=this.router.events.pipe(Object(Un.a)(function(n){return n instanceof a.e}));l.pipe(Object(Un.a)(function(n){return n.completed}),Object(b.a)(function(n){var l,e=n.items.map(function(n){return n.track.artists.map(function(n){return n.id})}),u=Object(ut.uniq)(Object(ut.flatten)(e));return(l=t.artistApi).get.apply(l,u)}),Object(pn.a)(u)).subscribe(function(n){e.next(n),e.complete()});var r=e.pipe(Object(E.a)(function(n){var t=new Map;return n.forEach(function(n){n.genres.forEach(function(n){t.has(n)?t.get(n).value+=1:t.set(n,{id:n,name:n.toUpperCase(),value:1})})}),Array.from(t.values())})),i=Array.isArray(n.queryParams.genre)?n.queryParams.genre[0]:n.queryParams.genre,o=r.pipe(Object(E.a)(function(n){return n.some(function(n){return n.id===i})?i:""})),s=o.pipe(nt(e.asObservable()),Object(E.a)(function(n){var t=n[0];return n[1].filter(function(n){return n.genres.indexOf(t)>-1})}));return{tracksCollection$:l,chartData$:r,selectedGenre$:o,genredArtists$:s}},n}(),at=function(){function n(n,t){this.artistApi=n,this.router=t}return n.prototype.resolve=function(n){var t=this,l=n.parent.data.data.tracksCollection$,e=new Wn.a,u=this.router.events.pipe(Object(Un.a)(function(n){return n instanceof a.e}));return l.pipe(Object(Un.a)(function(n){return n.completed}),Object(b.a)(function(n){var l,e=n.items.map(function(n){return n.track.artists.map(function(n){return n.id})}),u=Object(ut.uniq)(Object(ut.flatten)(e));return(l=t.artistApi).get.apply(l,u)}),Object(pn.a)(u)).subscribe(function(n){e.next(n),e.complete()}),{artistGroups$:e.pipe(nt(l),Object(E.a)(function(n){return t.groupByArtist.apply(t,n)}))}},n.prototype.groupByArtist=function(n,t){var l={};return t.items.forEach(function(t){var e=t.track;e.artists.forEach(function(t){var u=n.find(function(n){return n.id===t.id});u&&(l[t.id]||(l[t.id]={artist:u,tracks:[]}),l[t.id].tracks.push(e))})}),Object.values(l).sort(function(n,t){return t.tracks.length-n.tracks.length})},n}(),it=l("gIcY"),ot=l("eDkP"),st=l("Fzqc"),ct=l("M2Lx"),bt=l("uGex"),pt=l("Wf4p"),ft=l("ZYjt");l("n6gG");var ht=function(){return function(){}}(),dt=Hn,mt=at,gt=rt,vt=Vn,yt=function(){return function(){}}(),xt=l("SMsm"),kt=l("y4qS"),Ct=l("BHnd"),Ot=l("4c35"),At=l("qAlS"),qt=l("seP3"),jt=l("ZPbH");l.d(t,"FavoriteModuleNgFactory",function(){return Lt});var Lt=e.ob(u,[],function(n){return e.yb([e.zb(512,e.j,e.db,[[8,[r.a,k,D,Q,tn,an,Bn,Rn]],[3,e.j],e.y]),e.zb(4608,q.n,q.m,[e.v,[2,q.x]]),e.zb(4608,Hn,Hn,[a.m,m]),e.zb(4608,Vn,Vn,[h.a,a.m]),e.zb(4608,rt,rt,[et.a,a.m]),e.zb(4608,at,at,[et.a,a.m]),e.zb(4608,it.s,it.s,[]),e.zb(4608,ot.c,ot.c,[ot.i,ot.e,e.j,ot.h,ot.f,e.r,e.A,q.d,st.b,[2,q.h]]),e.zb(5120,ot.j,ot.k,[ot.c]),e.zb(4608,ct.c,ct.c,[]),e.zb(5120,bt.a,bt.b,[ot.c]),e.zb(1073742336,q.c,q.c,[]),e.zb(1073742336,st.a,st.a,[]),e.zb(1073742336,pt.l,pt.l,[[2,pt.d],[2,ft.g]]),e.zb(1073742336,ht,ht,[]),e.zb(1073742336,yn.b,yn.b,[]),e.zb(1073742336,pt.v,pt.v,[]),e.zb(1073742336,vn.c,vn.c,[]),e.zb(1073742336,a.p,a.p,[[2,a.v],[2,a.m]]),e.zb(1073742336,yt,yt,[]),e.zb(1073742336,it.p,it.p,[]),e.zb(1073742336,it.h,it.h,[]),e.zb(1073742336,xt.c,xt.c,[]),e.zb(1073742336,kt.p,kt.p,[]),e.zb(1073742336,Ct.l,Ct.l,[]),e.zb(1073742336,Ot.b,Ot.b,[]),e.zb(1073742336,At.b,At.b,[]),e.zb(1073742336,ot.g,ot.g,[]),e.zb(1073742336,pt.t,pt.t,[]),e.zb(1073742336,pt.q,pt.q,[]),e.zb(1073742336,ct.d,ct.d,[]),e.zb(1073742336,qt.d,qt.d,[]),e.zb(1073742336,bt.d,bt.d,[]),e.zb(1073742336,jt.a,jt.a,[]),e.zb(1073742336,u,u,[]),e.zb(1024,a.k,function(){return[[{path:"",component:g,resolve:{data:dt},children:[{path:"artist",component:z,resolve:{data:mt}},{path:"album",component:S},{path:"track",component:V},{path:"analytics",component:ln,children:[{path:"genre",component:Cn,resolve:{data:gt},runGuardsAndResolvers:"paramsOrQueryParamsChange"},{path:"track",component:Sn,resolve:{data:vt}},{path:"**",redirectTo:"genre"}]},{path:"**",redirectTo:"artist"}]}]]},[])])})}}]);